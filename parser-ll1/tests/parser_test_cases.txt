PARSER abc" def" &2
INPUT  abcdef
EXPECT ok (abc def)

INPUT abc def
EXPECT ok (abc def)

INPUT abcd ef
EXPECT err Parse error: expected 'def' but found 'd'.

PARSER [0-9]+/ $
INPUT 234
EXPECT ok 234
INPUT 23a
EXPECT err Parse error: expected end of file but found 'a'.

PARSER [a-z]+/ *
INPUT abc de  f
EXPECT ok (abc de f)

# Many0
PARSER ab" * c" &2
INPUT c
EXPECT ok (() c)
INPUT abc
EXPECT ok ((ab) c)
INPUT abababc
EXPECT ok ((ab ab ab) c)

PARSER [a-z]+/ ;" ,
INPUT ab;cd;ef
EXPECT ok (ab cd ef)
INPUT ab
EXPECT ok (ab)
INPUT 
EXPECT ok ()
INPUT ab;
#EXPECT err Parse error: expected regex but found end of file.

# Test regex error
# (The actual error message is multiple lines; we only check the first)
PARSER [/
INPUT a
EXPECT err regex parse error:

PARSER [a-z]+/ * [a-z]+/ &2
INPUT
EXPECT err
